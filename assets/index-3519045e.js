(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const g=document.querySelector("#moons"),t=document.querySelector("#video"),l=document.querySelector("#canvas"),c=l==null?void 0:l.getContext("2d",{willReadFrequently:!0}),d=16,y=.9,q=async()=>{if(!g||!t||!l)return;const a=await navigator.mediaDevices.getUserMedia({video:{noiseSuppression:!0},audio:!1});t.srcObject=a,t.addEventListener("loadedmetadata",i=>{O(),t.play(),t.requestVideoFrameCallback(b)})},O=()=>{!t||!l||(l.width=t.videoWidth,l.height=t.videoHeight)},b=()=>{if(!g||!t||!c)return;c.save(),c.translate(t.videoWidth,0),c.scale(-1,1),c.drawImage(t,0,0,t.videoWidth,t.videoHeight),c.restore();const{data:a}=c.getImageData(0,0,t.videoWidth,t.videoHeight);c.clearRect(0,0,t.videoWidth,t.videoHeight);const i=255/5;for(let r=0;r<t.videoHeight;r+=d)for(let s=0;s<t.videoWidth;s+=d){if(r/d%2===1&&s===t.videoWidth-d)continue;const e=r/d%2===0?0:d/2,[o,n,u]=W(s+e,r,d,t.videoWidth,a),f=x(o,n,u),m=Math.min(Math.floor(f/i),4);c.drawImage(g,m*200,0,200,200,(s+e)*y,r*y,d,d)}t.requestVideoFrameCallback(b)},W=(a,i,r,s,e)=>{const o=r/2,n=r**2;let[u,f,m]=[0,0,0];for(let v=-o;v<o;v++)for(let p=-o;p<o;p++){const h=(a+i*s)*4;u+=e[h],f+=e[h+1],m+=e[h+2]}return[u/n,f/n,m/n]},x=(a,i,r)=>.3*a+.59*i+.11*r;q();
